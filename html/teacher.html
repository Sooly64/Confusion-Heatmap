<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - Confusion HeatMap</title>
    <link rel="stylesheet" href="../css/styles.css?v=22">
    <!-- Firebase SDKs - These are loaded from Google's CDN -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <!-- QRCode library for generating on-page QR codes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body class="teacher">
    <!-- Create a Room Prompt -->
    <div id="roomOverlay" class="overlay">
      <div class="panel">
        <div class="title">Create a Room</div>
        <div class="row room-input-row" style="display: flex; justify-content: center; margin-top:8px;">
          <input id="roomInput" type="text" placeholder="e.g. algebra-101 or room1" style="flex-grow: 1;" />
          <button id="roomSubmitBtn" class="btn" aria-label="Create Room" title="Create Room" style="flex-grow: 1;">Create Room</button>
        </div>
      </div>
    </div>

    <div id="mainApp" class="container centered" style="display:none;">
      <div class="card teacher-wrap">
        <div class="col-left">
          <div class="row" style="flex-direction: column; align-items: stretch;">
            <div class="subtle" style="font-weight:600; margin-bottom:6px; display: flex; justify-content: center;">Live responses</div>
            <div id="bar" class="bar-stack">
              <div id="barGood" class="bar-seg bar-good" title="Good" style="width:0%"></div>
              <div id="barNoVote" class="bar-seg bar-novote" title="Haven't voted" style="width:0%"></div>
              <div id="barConfused" class="bar-seg bar-confused" title="Confused" style="width:0%"></div>
            </div>
            <div class="counts">
              <div><div class="subtle">Good</div><div class="badge good" id="goodCount">0</div></div>
              <div><div class="subtle">Not voted</div><div class="badge warn" id="noVoteCount">0</div></div>
              <div><div class="subtle">Confused</div><div class="badge bad" id="confusedCount">0</div></div>
            </div>
          </div>
          <div class="row" style="justify-content:center;">
            <button class="btn btn-danger" id="resetButton">Reset All Responses</button>
          </div>
          
          <!-- Feedback Section Moved Here -->
          <div class="feedback-section">
            <div class="section-header">
              <h3>Student Feedback</h3>
            </div>
            <div id="feedbackList" class="feedback-list">
              <!-- Feedback items will be added here dynamically -->
              <div class="no-feedback">No feedback yet</div>
            </div>
          </div>
        </div>
        <div class="col-right">
          <div class="row" style="justify-content:center; text-align:center;">
            <div style="display:flex; flex-direction:column; align-items:center;">
              <div class="subtle" style="font-size:14px; opacity:0.7;">Room</div>
              <div class="title" id="roomName"></div>
            </div>
          </div>
          <div class="row" style="justify-content:center; margin-bottom: 16px;">
            <div id="qrcode" class="qr"></div>
          </div>
          
        </div>
      </div>
    </div>
    <div id="toast" class="toast" role="status" aria-live="polite"></div>
    <script src="../js/firebase.js"></script>
    <script src="../js/teacher.js"></script>
</body>
</html>
